# 德州扑克完整比较规则文档 🎲

## 总则
当玩家牌型相同时，必须比较所有牌值来确定获胜者。只有在所有牌值完全相同且完全来自公共牌时才允许平分池底。

## 各牌型详细比较规则

### 1. 皇家同花顺 (Royal Flush) 🏆
- **牌型**: A-K-Q-J-10 同花色
- **比较规则**: 皇家同花顺之间无大小区别，所有皇家同花顺等级相同
- **比较顺序**: 无需比较，直接检查是否平分
- **平分条件**: 只有当A-K-Q-J-10都在公共牌中时才能平分

**实例**:
```
玩家A: A♠ K♠ (公共牌: Q♠ J♠ 10♠ 9♣ 8♣)
玩家B: A♥ K♥ (公共牌: Q♠ J♠ 10♠ 9♣ 8♣)
结果: 玩家A获胜 (因为牌值来自手牌，不能平分)
```

### 2. 同花顺 (Straight Flush) 🌟
- **牌型**: 连续5张同花色牌
- **比较规则**: 比较最高牌值
- **比较顺序**: 最高牌 → 全部牌值
- **特殊处理**: A-2-3-4-5顺子中A算作1

**实例**:
```
玩家A: 9♠ 8♠ (公共牌: 7♠ 6♠ 5♠ K♣ Q♣)
玩家B: 8♦ 7♦ (公共牌: 6♦ 5♦ 4♦ K♣ Q♣)
结果: 玩家A获胜 (9高同花顺 vs 8高同花顺)
```

### 3. 四条 (Four of a Kind) 💎
- **牌型**: 4张相同牌值 + 1张其他牌
- **比较规则**: 四条牌值 → 单张牌值
- **比较顺序**: [四条牌值, 单张牌值]

**实例**:
```
玩家A: A♠ A♣ (公共牌: A♦ A♥ K♠ Q♣ J♣)
玩家B: K♠ K♦ (公共牌: K♥ K♣ A♠ Q♣ J♣)
结果: 玩家A获胜 (四条A vs 四条K)

玩家A: A♠ K♠ (公共牌: A♦ A♥ A♣ Q♣ J♣)
玩家B: A♠ Q♠ (公共牌: A♦ A♥ A♣ K♣ J♣)
结果: 玩家A获胜 (四条A带K vs 四条A带Q)
```

### 4. 葫芦 (Full House) 🏠
- **牌型**: 3张相同 + 2张相同
- **比较规则**: 三条牌值 → 对子牌值
- **比较顺序**: [三条牌值, 对子牌值]

**实例**:
```
玩家A: A♠ A♣ (公共牌: A♦ K♥ K♠ Q♣ J♣)
玩家B: K♠ K♦ (公共牌: K♥ A♠ A♣ Q♣ J♣)
结果: 玩家A获胜 (三条A vs 三条K)

玩家A: A♠ Q♠ (公共牌: A♦ A♥ Q♣ Q♦ J♣)
玩家B: A♠ J♠ (公共牌: A♦ A♥ J♦ J♥ Q♣)
结果: 玩家A获胜 (A满Q vs A满J)
```

### 5. 同花 (Flush) 🌸
- **牌型**: 5张同花色非连续牌
- **比较规则**: 逐张比较，从最大到最小
- **比较顺序**: [最大牌, 次大牌, 第三大牌, 第四大牌, 最小牌]

**实例**:
```
玩家A: A♠ K♠ (公共牌: Q♠ J♠ 9♠ 8♣ 7♣)
玩家B: A♦ Q♦ (公共牌: K♦ J♦ 9♦ 8♣ 7♣)
结果: 玩家A获胜 (A-K-Q-J-9 vs A-K-Q-J-9中K位置不同)

玩家A: A♠ 10♠ (公共牌: K♠ Q♠ J♠ 8♣ 7♣)
玩家B: A♦ 9♦ (公共牌: K♦ Q♦ J♦ 8♣ 7♣)
结果: 玩家A获胜 (第五张牌10 vs 9)
```

### 6. 顺子 (Straight) 📏
- **牌型**: 连续5张不同花色牌
- **比较规则**: 比较最高牌值
- **比较顺序**: [最高牌值]
- **特殊处理**: A-2-3-4-5顺子中A算作1

**实例**:
```
玩家A: A♠ K♣ (公共牌: Q♦ J♥ 10♠ 9♣ 8♣)
玩家B: K♠ Q♦ (公共牌: J♥ 10♠ 9♣ 8♦ 7♣)
结果: 玩家A获胜 (A高顺子 vs K高顺子)

玩家A: 5♠ 4♣ (公共牌: 3♦ 2♥ A♠ K♣ Q♣)
玩家B: 6♠ 5♦ (公共牌: 4♥ 3♠ 2♣ A♦ K♣)
结果: 玩家B获胜 (6高顺子 vs 5高顺子，A-2-3-4-5中A算1)
```

### 7. 三条 (Three of a Kind) 🎯
- **牌型**: 3张相同 + 2张不同单张
- **比较规则**: 三条牌值 → 第一单张 → 第二单张
- **比较顺序**: [三条牌值, 最大单张, 次大单张]

**实例**:
```
玩家A: A♠ A♣ (公共牌: A♦ K♥ Q♠ J♣ 10♣)
玩家B: K♠ K♦ (公共牌: K♥ A♠ Q♣ J♦ 10♣)
结果: 玩家A获胜 (三条A vs 三条K)

玩家A: A♠ K♠ (公共牌: A♦ A♥ Q♣ J♦ 10♣)
玩家B: A♠ Q♠ (公共牌: A♦ A♥ K♣ J♦ 10♣)
结果: 玩家A获胜 (三条A带K vs 三条A带Q)

玩家A: A♠ J♠ (公共牌: A♦ A♥ K♣ Q♦ 10♣)
玩家B: A♠ 10♠ (公共牌: A♦ A♥ K♣ Q♦ J♣)
结果: 玩家A获胜 (第二单张J vs 10)
```

### 8. 两对 (Two Pair) 👥
- **牌型**: 2张相同 + 2张相同 + 1张单张
- **比较规则**: 大对 → 小对 → 单张
- **比较顺序**: [大对牌值, 小对牌值, 单张牌值]

**实例**:
```
玩家A: A♠ A♣ (公共牌: K♦ K♥ Q♠ J♣ 10♣)
玩家B: K♠ K♦ (公共牌: Q♥ Q♠ A♣ J♦ 10♣)
结果: 玩家A获胜 (A-K两对 vs K-Q两对)

玩家A: A♠ K♠ (公共牌: A♦ K♥ Q♣ J♦ 10♣)
玩家B: A♠ K♠ (公共牌: A♦ K♥ J♣ Q♦ 10♣)
结果: 平局 (A-K两对带Q，如果A-K-Q都在公共牌中则平分)

玩家A: A♠ J♠ (公共牌: A♦ K♥ K♣ Q♦ 10♣)
玩家B: A♠ 10♠ (公共牌: A♦ K♥ K♣ Q♦ J♣)
结果: 玩家A获胜 (A-K两对带J vs A-K两对带10)
```

### 9. 一对 (One Pair) 👫
- **牌型**: 2张相同 + 3张不同单张
- **比较规则**: 对子牌值 → 第一单张 → 第二单张 → 第三单张
- **比较顺序**: [对子牌值, 最大单张, 次大单张, 最小单张]

**实例**:
```
玩家A: A♠ A♣ (公共牌: K♦ Q♥ J♠ 10♣ 9♣)
玩家B: K♠ K♦ (公共牌: A♥ Q♠ J♣ 10♦ 9♣)
结果: 玩家A获胜 (对A vs 对K)

玩家A: A♠ K♠ (公共牌: A♦ Q♥ J♣ 10♦ 9♣)
玩家B: A♠ Q♠ (公共牌: A♦ K♥ J♣ 10♦ 9♣)
结果: 玩家A获胜 (对A带K vs 对A带Q)

玩家A: A♠ J♠ (公共牌: A♦ K♥ Q♣ 10♦ 9♣)
玩家B: A♠ 10♠ (公共牌: A♦ K♥ Q♣ J♦ 9♣)
结果: 玩家A获胜 (第二单张J vs 10)
```

### 10. 高牌 (High Card) 🎴
- **牌型**: 5张不同花色、不连续的牌
- **比较规则**: 逐张比较，从最大到最小
- **比较顺序**: [最大牌, 次大牌, 第三大牌, 第四大牌, 最小牌]

**实例**:
```
玩家A: A♠ K♣ (公共牌: Q♦ J♥ 9♠ 8♣ 7♣)
玩家B: A♦ Q♦ (公共牌: K♥ J♠ 9♣ 8♦ 7♣)
结果: 玩家A获胜 (A-K-Q-J-9 vs A-K-Q-J-9中第二张K vs Q)

玩家A: A♠ 8♠ (公共牌: K♦ Q♥ J♣ 9♦ 7♣)
玩家B: A♦ 7♦ (公共牌: K♥ Q♠ J♦ 9♣ 8♣)
结果: 玩家A获胜 (第五张牌8 vs 7)
```

## 平分池底的严格条件 ⚖️

### 允许平分的情况
只有当以下**所有条件**同时满足时才允许平分池底：

1. **牌型完全相同**
2. **所有比较牌值完全相同**
3. **所有比较牌值都来自公共牌**

### 平分实例

**可以平分的情况**:
```
公共牌: A♠ A♦ A♥ K♣ K♦
玩家A: Q♠ J♠ (最佳手牌: A♠ A♦ A♥ K♣ K♦ - 葫芦A满K)
玩家B: 10♠ 9♠ (最佳手牌: A♠ A♦ A♥ K♣ K♦ - 葫芦A满K)
结果: 平分池底 (最佳5张牌完全相同且都来自公共牌)
```

**不能平分的情况**:
```
公共牌: A♠ A♦ K♥ K♣ Q♦
玩家A: A♥ Q♠ (最佳手牌: A♠ A♦ A♥ K♣ K♦ - 葫芦A满K)
玩家B: K♠ Q♣ (最佳手牌: K♥ K♣ K♠ A♠ A♦ - 葫芦K满A)
结果: 玩家A获胜 (葫芦A满K vs 葫芦K满A)
```

## 实现算法总结 🔧

### 比较流程
1. **牌型排名比较** → 高牌型直接获胜
2. **关键牌值比较** → 主要特征牌值(如四条、三条、对子)
3. **所有牌值比较** → 完整5张牌逐位比较
4. **平分池底检查** → 验证是否满足平分条件

### 技术实现
- `rank`: 牌型等级 (1-10)
- `kickers`: 关键比较牌值 (按重要性排序)
- `allValues`: 完整5张牌值 (降序排列)
- 双重比较机制确保任何情况都能分出胜负

这套规则确保了德州扑克游戏的公平性和准确性! 🎲✨